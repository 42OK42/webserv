<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Upload Status</title>
	<style>
		ul { list-style-type: none; padding: 0; }
		li { margin: 10px 0; }
		button { margin-left: 10px; }
	</style>
</head>
<body>
	<h1>Upload Successful</h1>
	<p>Your file has been uploaded successfully.</p>
	<button onclick="location.href='/'">Back to Home</button>
	<button onclick="location.href='/upload'">Upload Another File</button>
	<button onclick="location.href='/form'">Go to Form Page</button>

	<h2>Uploaded Files</h2>
	<ul id="fileList"></ul>

	<script>
		document.addEventListener('DOMContentLoaded', () => {
			const fileListElement = document.getElementById('fileList');
			fileList.forEach(file => {
				const li = document.createElement('li');
				li.textContent = file;

				const deleteButton = document.createElement('button');
				deleteButton.textContent = 'Delete';
				deleteButton.onclick = () => deleteFile(file);

				li.appendChild(deleteButton);
				fileListElement.appendChild(li);
			});
		});

		function deleteFile(filename) {
			if (confirm(`Are you sure you want to delete ${filename}?`)) {
				fetch(`/uploadSuccessful?filename=${encodeURIComponent(filename)}`, {
					method: 'DELETE'
				})
				.then(response => response.text())
				.then(data => {
					alert(data);
					location.reload();
				})
				.catch(error => console.error('Error:', error));
			}
		}
	</script>
</body>
</html>